steps:
  - task: preBuild
    steps:
      - checkout: self
        fetchDepth: 2
        submodules: true
      - script: |
          md build
          cd build
          cmake .. -G "Visual Studio 15 2017 Win64"
  - task: build
    steps:
      - task: VSBuild@1
        inputs:
          solution: Civilizationpp.sln
          configuration: Release
          platform: x64
  - task: postBuild
    steps:
      - scripts: |
          cd bin
          cd Release
          UnitTests.exe